<!DOCTYPE HTML>
<html>
<head>
  <title>Rock, Paper, Scissors</title>
</head>

<body>

<h2>
  <p>Welcome to a friendly game of <a href=https://en.wikipedia.org/wiki/Rock–paper–scissors>rock, paper, scissors</a>!</p><br>
</h2>
<h5>
<p>Psychological tricks and game theory won't work on me!</p><br>
</h5>
<button type="button" onclick=game()>
Click me to play best of 5 games!</button>
<p id="round"></p>
<p id="result"></p>

<script>
  function game() {
    let playersWins = 0;
    let computersWins = 0;
    function playRound(playerSelection, computerSelection) {
      function userPlay() {
        initialPlayerSelection = prompt("Make a choice: rock, paper, or scissors.", "");
        let firstLetterPlayerSelection = initialPlayerSelection[0].toUpperCase();
        let restOfPlayerSelection = initialPlayerSelection.substr(1, );
        playerSelection = firstLetterPlayerSelection + restOfPlayerSelection.toLowerCase();
        return playerSelection;
      }
      function computerPlay() {
        let x = Math.random();
        let comPlay;
        if (x > 0 & x < 1/3) {
          comPlay = "Rock";
        } else if (x > 1/3 & x < 2/3) {
          comPlay = "Paper";
        } else {
          comPlay = "Scissors";
        }
        return comPlay;
      }
      playerSelection = userPlay();
      computerSelection = computerPlay();
      if (playerSelection !== "Rock" & playerSelection !== "Paper" & playerSelection !== "Scissors") {
        alert ("That is not a valid option!");
      } else if (playerSelection == computerSelection) {
        alert ("It's a tie! " + playerSelection + " ties " + computerSelection + ".");
      } else if ((playerSelection == "Paper" & computerSelection == "Rock") || (playerSelection == "Rock" & computerSelection == "Scissors") || (playerSelection == "Scissors" & computerSelection == "Paper")) {
        playersWins ++;
        alert ("You win! " + playerSelection + " beats " + computerSelection + ".");
      } else {
        computersWins ++;
        alert ("You lose! " + computerSelection + " beats " + playerSelection + ".");
      }
    }
    let score = "";
    while (playersWins < 3 & computersWins < 3) {
      playRound();
      score = "<br>Your wins: " + playersWins + " | My wins: " + computersWins;
      document.getElementById("round").innerHTML = score;
      if (playersWins > computersWins) {
        document.getElementById("result").innerHTML = "You win this time!";
      } else {
        document.getElementById("result").innerHTML = "I win this time!";
      }
    }
  }
</script>

</body>
</html>
